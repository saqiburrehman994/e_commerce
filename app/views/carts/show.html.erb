<h2 class='text-center mb-4'>🛒 Your Cart</h2>

<% if @cart_items.any? %>
  <div class='container'>
    <div class='card shadow-lg p-4 border-0'>
      <div class='card-body'>
        <% @cart_items.each do |item| %>
          <div class='row align-items-center border-bottom py-3'>
            <div class='col-md-8'>
              <h5 class='fw-bold'><%= item.product.name %></h5>
              <p class='text-muted mb-1'>🛍 Quantity: <%= item.quantity %></p>
              <p class='text-success fw-bold mb-0'>💲 Price: <%= number_to_currency(item.product.price) %></p>
            </div>
            <div class='col-md-4 text-end'>
              <%= link_to '✏️ Edit', edit_cart_item_path(item), class: 'btn btn-outline-warning btn-sm mx-1 px-3' %>
              <%= link_to '❌ Remove', cart_item_path(item),
                data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this item?' },
                class: 'btn btn-outline-danger btn-sm px-3'
              %>
            </div>
          </div>
        <% end %>

        <div class='mt-4 p-4 border rounded bg-light shadow-sm'>
          <h4 class='text-primary text-center'>📦 Shipping Details</h4>

          <% if current_user.shipping_detail.present? %>
            <p><strong>👤 Name:</strong> <%= current_user.shipping_detail.name %></p>
            <p><strong>🏠 Address:</strong> <%= current_user.shipping_detail.address %></p>
            <p><strong>📞 Phone:</strong> <%= current_user.shipping_detail.phone_number %></p>
            <div class='text-center mt-3'>
              <%= link_to '✏️ Edit Shipping Details', edit_shipping_detail_path(current_user.shipping_detail), class: 'btn btn-outline-primary btn-sm px-4' %>
            </div>
          <% else %>
            <p class='text-center text-muted'>No shipping details found.</p>
            <div class='text-center mt-3'>
              <%= link_to '➕ Add Shipping Details', new_shipping_detail_path, class: 'btn btn-success btn-sm px-4' %>
            </div>
          <% end %>
        </div>

        <div class='mt-4 p-4 border rounded bg-light shadow-sm'>
          <h4 class='text-primary text-center'>💳 Payment Details</h4>
          <% if current_user.payment_detail.present? %>
            <p class='text-center text-muted'>✅ Payment details saved.</p>
          <% else %>
            <p class='text-center text-muted'>No payment details found.</p>
            <div class='text-center mt-3'>
              <%= link_to '➕ Add Payment Details', new_payment_detail_path, class: 'btn btn-outline-primary btn-sm px-4' %>
            </div>
          <% end %>
        </div>

        <div class='text-center mt-4'>
          <%= button_to '🚀 Proceed to Checkout', checkout_orders_path, class: 'btn btn-success btn-lg w-100 shadow-sm fw-bold' %>
        </div>

      </div>
    </div>

    <div class='text-center mt-4'>
      <%= link_to '🛍 Add More Products', products_path, class: 'btn btn-primary btn-lg px-4 shadow-sm fw-bold' %>
    </div>

  </div>
<% else %>
  <p class='text-center text-muted fs-4'>Your cart is empty. 🛒</p>
<% end %>
